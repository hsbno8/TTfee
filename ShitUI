local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

local library = loadstring(game:HttpGet("https://raw.githubusercontent.com/bloodball/-back-ups-for-libs/main/youngstar"))();
local Window = library:CreateWindow("THE TOWER")

-- RUNNER: Flares Teleport
local flareParts = {}
local selectedFlare = nil
local ToggleScan = true

local function scanFlares()
    flareParts = {}
    for _, obj in pairs(Workspace:GetDescendants()) do
        if obj.Name == "Flare" and obj:IsA("BasePart") then
            table.insert(flareParts, obj)
        end
    end
    if #flareParts > 0 and not selectedFlare then
        selectedFlare = flareParts[1]
    end
end

scanFlares()

local flareNames = {}
for _, f in ipairs(flareParts) do table.insert(flareNames, f:GetFullName()) end


Window:Button("tp to flare", function()
    if selectedFlare and selectedFlare.Parent and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        LocalPlayer.Character.HumanoidRootPart.CFrame = selectedFlare.CFrame + Vector3.new(0,5,0)
    else
        warn("Invalid flare!")
    end
end)

-- Auto-refresh flares
spawn(function()
    while ToggleScan do
        scanFlares()
        wait(5)
    end
end)

-- VISUALS: Health Chams
local highlights = {}
local ChamsToggle = false

Window:Toggle("health chams", function(state)
    ChamsToggle = state
    if not state then
        for _, hl in pairs(highlights) do
            if hl and hl.Parent then pcall(function() hl:Destroy() end) end
        end
        highlights = {}
    end
end)

RunService.Heartbeat:Connect(function()
    if ChamsToggle then
        for _, plr in ipairs(Players:GetPlayers()) do
            if plr ~= LocalPlayer and plr.Character then
                local char = plr.Character
                local hum = char:FindFirstChildOfClass("Humanoid")
                if hum and hum.Health > 0 then
                    local hpPercent = hum.Health / math.max(hum.MaxHealth,1)
                    local color = (hpPercent>=0.8 and Color3.fromRGB(0,255,0)) or
                                  (hpPercent>=0.6 and Color3.fromRGB(255,255,0)) or
                                  Color3.fromRGB(255,0,0)
                    for _, partName in ipairs({"Torso","UpperTorso","LowerTorso","Head","Right Arm","Left Arm","Right Leg","Left Leg"}) do
                        local part = char:FindFirstChild(partName,true)
                        if part and part:IsA("BasePart") then
                            if not highlights[part] then
                                local hl = Instance.new("Highlight")
                                hl.Parent = part
                                hl.FillTransparency = 0.5
                                hl.OutlineTransparency = 0
                                hl.OutlineColor = Color3.fromRGB(255,255,255)
                                highlights[part] = hl
                            end
                            if highlights[part] then
                                highlights[part].FillColor = color
                            end
                        end
                    end
                end
            end
        end
    end
end)

-- SNIPER: Remove Particles & Lights
Window:Button("remove all particles", function()
    for _, obj in pairs(Workspace:GetDescendants()) do
        if obj:IsA("ParticleEmitter") or obj:IsA("Trail") or obj:IsA("Beam") or obj:IsA("Sparkles") or
           obj:IsA("Smoke") or obj:IsA("Fire") or obj:IsA("PointLight") or obj:IsA("SpotLight") or obj:IsA("SurfaceLight") then
            pcall(function() obj:Destroy() end)
        end
    end
end)
